\nn{Závěr}

V rámci diplomové práce byly analyzovány kompilační režimy JIT a nativní AOT na platformě .NET. První část představuje rešerše, ve které byly popsány základní principy fungování platformy .NET, jejich kompilačních režimů a cílů kompilace. Následně byla popsána architektura microservice, která slouží jako primární zacílení nativních AOT aplikací a která poskytuje vzor pro testovací nasazení. V neposlední řadě byla popsána problematika testování a monitorování aplikace. V praktické části byly přiblíženy nástroje a techniky použité k vývoji, sestavení a nasazení testovacích služeb spolu s monitorovacími nástroji. Poté byly provedeny testy podle předem definované metodiky a scénářů. V analytické části byly shrnuty poznatky z vývoje, analyzovány kompilační výstupy služeb a vyhodnocena testovací data. Výsledkem práce je analýza použití kompilačních režimů JIT a nativní AOT pro vývoj služeb v .NET. Dále byla vytvořena sada testovacích služeb, které slouží jako ukázka možností platformy. V neposlední řadě pro účely analýzy byla vytvořen testovací aplikace, jenž umožňuje vytváření, nasazení a monitorování .NET služeb. Výstup práce zprostředkovává přehled o možnostech a omezeních nativní AOT kompilace v .NET a poskytuje testovací aplikaci pro jednoduchou implementaci vlastních testovacích scénářů. Dodává teoretický základ, zkušenosti a výsledky testování do specifické oblasti vývoje nativně AOT kompilovaných služeb na platformě .NET.

Služby kompilované nativně AOT přináší specifické výkonnostní výhody za cenu kompatibility. Vývoj kódu je s ohledem na zažité postupy a praktiky v .NET nestandartní. Využitím interceptorů a generátorů je odebrána část inciativy z rukou vývojáře a vytváří se na pozadí kompilace v .NET další úroveň abstrakce. Podpora knihoven a frameworků třetích stran je omezena a nelze se spolehnout na jejich plnou funkčnost. Tím připadá na vývojáře zodpovědnost za implementaci vlastních řešení, která by jinak byla dostupná. Při většině vzorů nasazení nejsou čistě výkonnostní výhody dostatečným důvodem pro přechod na nativní AOT kompilaci a obětování funkcí runtime prostředí spolu s širokou podporou knihoven.

Samotný programový výstup vyšel dle očekávání a nativní AOT služby produkují větší paměťově výstup než JIT služby. Situace se však obrací při kontejnerizovaném nasazení, kdy závislost JIT služeb na runtime prostředí produkuje daleko větší obrazy služeb. Výsledné programy AOT služeb byly analyzovány i z pohledu cílových OS a architektur, kdy bylo zjištěno, že výstup pro Windows je znatelně menší, než je tomu u ostatních OS. Po straně architektury se ukázala být výhodnější architektura amd64 s ohledem na velikost nativní aplikace.

Ve výkonnostním porovnání byly obrazy nativních AOT služeb mírně efektivnější ve využití systémových zdrojů, obzvláště CPU. Výsledky testování ukázaly, že na platformě .NET nativní AOT aplikace mají obecně srovnatelný výkon jako aplikace v režimu JIT. Rozdíl je znatelný v situacích, kdy je nutno využít velké množství instancí stejné služby (plyne z velikosti obrazu) a v situacích, kdy je pro systém rozhodující rychlost zpracování požadavku službou včetně spuštění (např. Serverless nasazení). Konkrétně rozdíl rychlosti spuštění však nebyl natolik markantní, a to z důvodu režie spuštění celého kontejneru služby k poměru režie startu pouze programu služby. Výsledky výkonnostního testování byly zaznamenány a zpracovány do tabulek a jsou součástí textu práce. Zároveň byly vytvořeny interaktivní dashboardy v rámci aplikace Grafana, jež umožňují podrobný náhled na výkonnost celé aplikace. 

Mnoho výhod, které z platformy .NET plynou souvisí s možnostmi CLR. Nativní AOT kompilace má smysl ve specifických případech, jež plynou z nutnosti rychlosti spuštění a velikosti výstupu aplikace. Konkurenční výhody AOT kompilace v .NET, oproti jiným technologiím produkujícím nativní programy, nastávají při sjednoceném technologické bázi. Pokud je vývojář, respektive zapojený tým schopen efektivně přijmout jiný jazyk a technologii, jsou výhody AOT kompilace ztraceny, zatímco nedostatky zvýrazněny. Předpoklad stejné technologické a kódové báze na platformě .NET je relativně v rozporu s požadavky na poskytování cloudových služeb, kdy je očekáváno silné technické a vědomostní zázemí a flexibilní přístup k implementaci řešení. Dále tento předpoklad jde proti jedné z výhod microservice architektury, a to možnosti kombinovat různé technologie a nástroje. Z širšího pohledu na platformu .NET a strategie firmy Microsoft, nativní AOT zaplňuje specifickou díru v portfoliu technologií. Poskytuje možnost řešit specifické situaci, vyžadující charakteristiky nativních aplikací na PC platformě. Spolu s dalšími nástroji platformy .NET vytváří ucelenou sadu technologií pro tvorbu kompletních cloudových řešení. Vývojáři, kteří se rozhodnou pro AOT kompilaci, by měli být obeznámeni s těmito specifiky a měli by být schopni je zohlednit v návrhu a implementaci řešení.

V návaznosti na testovací aplikaci, která v práci vznikla za účelem výkonnostního testování služeb, se nabízí doplnit implementaci dalších služeb, případně rozšířit stávající. Snahou bylo vytvořit řešení, na základě něhož bude možno jednoduše implementovat konkrétní scénáře využití nativní AOT kompilace v .NET a analyzovat je. Podle vzoru současného řešení lze dodat další funkcionalitu, nastavit další zdroje monitorování, případně rozšířit možnosti vizualizace dat. Z pohledu uživatelské přívětivosti se nabízí tvorba aplikace s grafickým rozhraním využívající princip Docker outside of Docker. Tímto by bylo možné zjednodušit spouštění konkrétních testovacích scénářů. V rámci webové aplikace by bylo možné nastavit parametry testování, spustit konkrétní test a prokliknout se odkazem na relevantní dashboard v Grafaně. S ohledem na citlivé data a přístupy, které aplikace zprostředkovává, se nabízí rozšíření o autentizaci a autorizaci komunikace služeb. Toto rozšíření je obzvlášť podstatné, má-li být aplikace veřejně dostupná. Jelikož grafické rozhraní aplikace je založeno na aplikaci Grafana, jež je schopna připojit se k externím zprostředkovatelům autentizace, bylo by vhodné zapojit autentizační službu jako například Keycloak a sjednotit autentifikaci napříč aplikací.
