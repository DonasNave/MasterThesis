
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                  MONITORING                                   %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\n{1}{Monitorování aplikace}

Monitorování aplikací je klíčovým aspektem moderního vývoje a provozu softwaru, který umožňuje sledovat výkon, stav a celkové chování aplikací v reálném čase. Zahrnuje shromažďování, analýzu a interpretaci různých typů dat a informací, které zajišťují hladký a efektivní chod aplikací a umožňují rychle identifikovat a řešit případné problémy. \cite{Majors2022}

\n{2}{Cíle monitorování}

Cílem monitorování v kontextu mikroslužeb je poskytnout využitelné informace v několika klíčových oblastech:

\begin {itemize}
    \item \textbf{Výkonnost systému} - Monitorování se snaží zachytit kritické výkonnostní metriky, jako je latence, propustnost a chybovost. Tyto metriky pomáhají pochopit, jak dobře služby fungují za normálních podmínek a při zátěži.
    \item \textbf{Využití zdrojů} - Je důležité sledovat využití systémových prostředků včetně procesoru, paměti a diskových I/O operací. Poznatky o využití zdrojů pomáhají při optimalizaci výkonu aplikací a při plánování škálovacích operací.
    \item \textbf{Stav a dostupnost služeb} - Sledování stavu a dostupnosti jednotlivých mikroslužeb zajišťuje, že lze rychle identifikovat a odstranit případné problémy, aby byla zachována integrita a spolehlivost systému.
    \item \textbf{Dopad na vývoj a nasazení} - Ačkoli je monitorování spíše kvalitativní, může také poskytnout zpětnou vazbu o dopadu různých strategií nasazení a sestavení na výkon systému. To zahrnuje míru úspěšnosti nasazení, problémy vyplývající z nových nasazení a chování nových funkcí v ostrém prostředí.
\end{itemize}

\n{2}{Druhy dat}

Monitorovací data hrají zásadní roli při údržbě a optimalizaci moderních softwarových systémů. Sběrem, analýzou a interpretací různých typů dat lze získat cenné informace o výkonu, stavu a celkovém chování aplikací. Následující část kategorizuje tři základní typy monitorovacích dat: metriky, logy a traces. Jednolitvé druhy slouží různým účelům a poskytují pohled na výkon a stav systému z určitěného úhlu. 

\n{3}{Logy}

Logy jsou chronologické záznamy o událostech, ke kterým dochází v rámci aplikace. Pomáhají určit hlavní příčiny konkrétních problémů nebo odhalit vzory svědčící o větších problémech. Generuje je jak operační systém tak i aplikace na něm běžící. Logy mohou nabývat různých struktur, nejjednodušší způsob je obyčejný textový řetězec, ale některé nástroje podporují strukturované logy, což jsou datové záznamy nabývající podoby typicky JSON nebo XML formátu. Obvykle obsahují mimo jiné data o systémových aktivitách, chybách, systémových zprávách, změnách konfigurace a síťových požadavcích. Analýzou logů mohou vývojáři a správci systému odstraňovat problémy, porozumět kontextu aplikace a zajistit soulad s očekávaným chováním. Nástroje pro správu logů poskytují funkce pro vyhledávání, filtrování a analýzu záznamů. Mezi populární nástroje správy patří Elasticsearch, Logstash nebo Loki.

\n{3}{Traces}

Traces trasují cestu požadavku, při průchodu různými součástmi distribuovaného systému. Každá trace se skládá z jednoho nebo více segmentů, které zaznamenávají cestu a latenci požadavku napříč různými službami a zdroji. Sledování je zvláště důležité v architekturách mikroslužeb, kde jedna transakce může zahrnovat více, volně propojených služeb. Poskytuje přehled o výkonu a chování jednotlivých služeb a systému jako celku a pomáhá identifikovat jeho úzká místa na problémy s latencí. Traces pomáhají pochopit vztahy a závislosti mezi službami, což umožňuje efektivnější ladění a optimalizaci. Mezi populární nástroje pro správu trace patří Jaeger, Zipkin anebo Tempo. \cite{Molkova2023}

\n{3}{Metriky}

Metriky jsou kvantitativní údaje, které poskytují přehled o výkonu a stavu aplikace v reálném čase. Tyto datové body jsou obvykle numerické a jsou shromažďovány v pravidelných intervalech. Běžnými programovými strukturami, které umožňují zaznamenání metrik jsou čítače a historgramy. Typické data pro metriky jsou doba odezvy, využití systémových prostředků (procesor, paměť, I/O, ...), chybovost a propustnost. Sledování těchto metrik pomáhá při proaktivním ladění výkonu a plánování kapacity. Mezi populárí nástroje pro sběr a vizualizaci metrik jsou Prometheus, Datadog nebo Splunk.

\n{2}{Sběr dat}

Efektivita monitorování aplikací do značné míry závisí na schopnosti efektivně shromažďovat relevantní data z různých zdrojů a schopnosti zprostředkování těchto dat do monitorovacích nástrojů. Kolektory jsou nástroje nebo agenti, kteří shromažďují data z různých zdrojů v rámci aplikace a jejího prostředí. Mohou být nasazeny jako součást infrastruktury aplikace nebo mohou být provozovány jako externí služby. Kolektory jsou zodpovědné za shromažďování logů, traces a metrik. Dále za předávání těchto dat do monitorovacích řešení, kde je lze analyzovat a vizualizovat. Efektivní sběr dat je nezbytný pro monitorování v reálném čase a pro zajištění toho, aby shromážděná data přesně odrážela stav a výkon aplikace. Nejpopulárnější univerzální kolektor představuje nástroj OpenTelemetry. \cite{Blanco2023}

\n{2}{Analýza a interpretace}

V oblasti monitorování systému je sběr dat pouze prvním krokem. Skutečná hodnota spočívá v tom, jak jsou tato data analyzována a interpretována. Analýza a interpretace transformují nezpracovaná data na praktické poznatky, které organizacím umožňují porozumět nejen tomu, co se děje v jejich systémech, ale také tomu, proč k těmto událostem dochází. Tyto procesy jsou úzce propojeny. Vizualizace zpřístupňuje komplexní data a pomáhá zúčastněným stranám rozpoznat trendy a anomálie na první pohled. Mezitím pokročilé analytické techniky poskytují hlubší porozumění dat, odhalují základní vzorce a předpovídají budoucí trendy, které informují o strategickém rozhodování. Společně umožňují reagovat na aktuální stavy systému a proaktivně spravovat a optimalizovat budoucí výkon a robustnost. \cite{Majors2022}

\n{3}{Vizualizace dat}

Vizualizace dat je klíčovým aspektem monitorování aplikací, který umožňuje rychle porozumět stavu a chování aplikací. Grafickým znázorněním komplexních datových toků lze snadněji odhalit trendy a vzorce, které nemusí být patrné ze samotných nezpracovaných dat. Vizualizace mohou mít různé formáty:

\begin{itemize}
    \item \textbf{Grafy} - Spojnicové grafy, sloupcové grafy a bodové grafy, které mohou zobrazovat změny v čase, distribuce a korelace.
    \item \textbf{Tabulky} - Prezentují nezpracovaná data zarovnaná do sloupců pro přímé srovnání.
    \item \textbf{Řídicí panely} - Integrují více vizualizací do jediného rozhraní a nabízejí detailní pohled na výkon a stav systému.
    \item \textbf{Heatmapy} - Ilustrují složité vztahy a toky mezi komponentami systému.
\end{itemize}

Použitím a kombinací vizualizačních komponent vzniká unikátní pohled na dostupná telemetrická data. Tím je umožněno rychle identifikovat klíčová a kritická místa systému, jako jsou bottlenecks (úzká místa výkonu) a řešit potenciální problémy dříve, než ovlivní stabilitu systému nebo uživatelský dojem z aplikace. \cite{Chapman2023}

\n{3}{Techniky analýzy dat}

Analýza dat v kontextu monitorování systému zahrnuje více než jen vizuální interpretaci:

\begin{itemize}
    \item \textbf{Statistická analýza} - Použití statistických technik k pochopení chování systému za různých podmínek. To může zahrnovat analýzu rozptylu, regresní modely pro předpovídání budoucích trendů a algoritmy detekce anomálií k odhalení neočekávaného chování.
    \item \textbf{Korelační analýza} - Určení vztahů mezi různými metrikami k identifikaci hlavních příčin problémů. Například korelování špiček využití Central Processing Unit (dále CPU) s konkrétními událostmi nebo operacemi aplikace.
    \item \textbf{Analýza logů} - Použití pokročilé textové analýzy a strojového učení k extrahování užitečných informací z nestrukturovaných protokolů, což pomáhá určit přesnou sekvenci událostí vedoucích k selhání nebo snížení výkonu.
    \item \textbf{Prediktivní analýza} - Používání prediktivních modelů k předpovídání budoucího chování systému na základě historických dat. To pomáhá při plánování kapacity a proaktivním řešení problémů.
\end{itemize}

\n{3}{Využití dat pro informované rozhodování}

Konečným cílem analýzy a vizualizace dat je podpora informovaného rozhodování. Interpretovaná data poskytují užitečné poznatky, na základě kterých lze provádět strategická rozhodnutí a optimalizovat výkon a stabilitu systému:

\begin{itemize}
    \item \textbf{Přidělování zdrojů} - Úprava přidělování zdrojů na základě údajů o výkonu za účelem optimalizace zdrojů a výkonu, jako je škálování zdrojů nahoru nebo dolů v reakci na očekávanou poptávku.
    \item \textbf{Optimalizace výkonu} - Identifikace a řešení překážek výkonu s cílem zlepšit odezvu aplikací a spokojenost uživatelů.
    \item \textbf{Zabezpečení} - Rozpoznání vzorců indikujících bezpečnostní hrozby za účelem posílení obrany a zmírnění zranitelnosti.
    \item \textbf{Vylepšení služeb} - Používání dat o interakci uživatelů k zlepšení funkčnosti a rozhraní aplikací.
\end{itemize}

\n{2}{Implementace monitorování}

Implementace monitorování aplikací zahrnuje několik kroků, včetně definice klíčových metrik, výběru monitorovacích nástrojů, nasazení kolektorů a vizualizaci dat. Týmy by měly také vytvořit procesy pro řešení problémů, které byly identifikovány prostřednictvím monitorování, a pro využití dat k plánování kapacity a optimalizaci výkonu. Obecně implementace monitorování zahrnuje následující kroky:

\begin{enumerate}
    \item \textbf{Sběr dat v monitorovaných službách} - Implementace sběru dat zahrnuje inkorporaci funkcionality monitorování a zprostředkování dat v rámci předdefinovaného rozhraní. Sběr je realizován zpravidla sérií čítačů a zapisovačů, které jsou využívány k získávání dat z různých zdrojů. Takto sbíraná data jsou kategorizována a tagována pro identifikaci. Realizace monitorování je zajištěna buďto použitím existujících implementací v rámci SW knihoven nebo vytvořením vlastní implementace dle potřeb aplikace a monitorovacích protokolů.
    \item \textbf{Nasazení služeb pro správu a sběr dat} - Je zajištěno pomocí nasazení nástrojů, které jsou schopny zprostředkovat sběr a distribuci telemetrických dat z různých zdrojů. Zároveň mohou i zajišťovat jejich zpracování a zobrazení. Klíčový je výběr nástrojů s ohledem na zprostředkování adekvátního rozhraní pro sběr a distribuci dat k následné vizualizaci. Splněním je dosaženo, že data jsou zpracována, uložena a dále zprostředkována v reálném čase.
    \item \textbf{Vizualizace dat} - Vizualizace dat je implementována nasazením nástrojů, které jsou schopny zobrazit data z dostupných zdrojů v uživatelsky přívětivé podobě. Formát připojení na datové zdroje s monitorovacími daty je definován protokoly relevantním služeb. Vizualiace konkrétních dat je předmětem vytvoření vizualizačních prvků. Data jsou zobrazena v reálném čase, jsou přehledná a srozumitelná.
\end{enumerate}

Konfigurace monitorování v rámci aplikace obecně zahrnuje zmapování interakcí mezi monitorovanými komponentami a monitorovacími nástroji. To zahrnuje určení, které metriky, logy a traces jsou relevantní na základě architektury aplikace a doménových požadavků. Konfigurace musí zajistit, že shromážděná data budou relevatní a vyvarovat se nadměrné granularitě, která může vést k přetížení systému. Obvykle tento proces zahrnuje nastavení agentů či integrací v rámci aplikace nebo služeb, které efektivně sbírají telemetrická data a přenáší je do centralizovaného monitorovacího systému, aniž by došlo k narušení výkonu aplikace. Komunikace mezi aplikačními komponentami a monitorovacími nástroji často využívá stávající síťové protokoly a metody bezpečného přenosu dat. Proces konfigurace může dále zahrnovat nastavení hraničních hodnot pro výstrahy, definování pravidel retence dat a nastavení parametrů pro automatické reakce na určité typy událostí. Tyto prvky pomáhají udržovat celkový stav a výkon aplikace. Tento přístup zajišťuje, že monitorovací systém poskytuje užitečné informace v souladu s doménovými požadavky a poskytuje komplexní bázi telemetrických dat pro analýzu a optimalizaci systému. \cite{Blanco2023}